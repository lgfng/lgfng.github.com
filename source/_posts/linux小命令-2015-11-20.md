title: linux小命令
date: 2015-11-20 12:22:54
tags:
---

linux环境下的一些小命令：

* 统计文件夹下的目录数
    ls -l | grep "^ｄ" |wc -l
    [wc命令](http://www.cnblogs.com/peida/archive/2012/12/18/2822758.html)


* 修改命令行提示符
	[环境变量PS1、PS2、PS3以及PS4来自定义用户命令行的字符显示](http://www.linux521.com/2009/system/201206/18120.html)
	linux系统的命令号提示符格式是设置在 环境变量 PS1 中的，可以通过`export PS1="\u@\h \w $ "` 来临时指定。
	如果想要永久生效的话，就需要将它写入到系统文件[**.bash_profile**]中.
	
* 动态链接库
    - 查看符号表  `nm`
    - 查看库的依赖关系 `ldd`  

* 查找
    [Linux的五个查找命令的区别](http://www.path8.net/tn/archives/4257)
    - `locate`      根据文件数据库,快速查找文件位置
        +  locate -- u  重新建立文件数据库(u前面有空格)
    - `find`        根据各种条件,查找文件 
        +  真实遍历查找,速度较慢
    - `whereis`     查找指定命令的位置(包括可执行文件/说明文件/源代码),
    - `which` 指令会在PATH变量指定的路径中，搜索某个系统命令的位置，并且返回第一个搜索结果

* 库文件相关
    - /etc/ld.so.conf 文件中,配置了系统默认查找目录
        + 修改配置(或新加库)之后,可通过`ldconfig` 命令来更新库缓存
        + 库文件缓存保存在 /etc/ld.so.cache 文件中, 程序查找库时,直接搜索这个文件,而不会去每个目录找

* alias 自定义命令别名
    -- alias  ll='ls -lF'  自定义ll命令
    -- unalias ll          删除ll 别名

* xmodmap 修改键盘映射
    [ linux修改键盘按键](http://blog.csdn.net/xiaoqin515515/article/details/18840035)

* fuser 命令
    - Show which processes use the named files, sockets, or filesystems.
    - 显示正在使用 指定 文件/端口/文件系统 的进程
    - 示例: 杀掉正在使用 80端口的进程
        + sudo fuser -k 80/tcp

* [linux 权限](http://binyan17.iteye.com/blog/1444452)

* tail 命令
    - ` tail [选项] [filename]`
    - 查看文件尾部内容, 默认为最后10行
    - 常见用法为 `tail -f [filename]`, 能即时输出文件追加的内容,常用于查看正在被写入的日志.

* top 命令
    - `top` 
    - 显示当前正在运行的所有进程,并按消耗资源数排序

* namei 命令
    - `namei [filename]`
    - 从追溯一个文件,直到最后, 常用于查看多层嵌套的符号链接. 

* file 命令
    - `file [filename]`
    - 查看一个文件的文件类型 (可执行文件, 库文件, 符号链接, 压缩包文件, ...)

* 添加系统启动项
假设要启动的程序为nginx, 启动脚本可[参考](http://library.linode.com/assets/660-init-deb.sh)
``` shell
    sudo mv xxx.sh /etc/init.d/nginx
    sudo chmod +x /etc/init.d/nginx
    sudo /usr/sbin/updare-rc.d -f nginx defaults
```

* [深入理解linux系统的目录结构](http://www.jb51.net/LINUXjishu/151820.html)
* [ubuntu中管理用户和用户组](http://www.cnblogs.com/vincedotnet/p/4017574.html)
    1. 用户组
        + `groupadd`        新增用户组
        + `groupdel`        删除用户组
        + `cat /etc/group`  查看所有用户组
    2. 用户
        + `useradd`         新增用户
        + `userdel`         删除用户
        + `passwd [user]`   修改用户密码, 可以使用sudo 修改root密码
        + `usermod`         修改用户权限
        + `cat /etc/passwd` 查看所有用户

* 字符集
    `locale -a`     查看本机支持的所有字符集
    `cd /usr/share/locales && sudo ./install-language-pack zh_CN` 安装中文字符集
    `cd /usr/share/locales && sudo ./remove-language-pack zh_CN` 卸载中文字符集

* [批量修改文件名](http://blog.chinaunix.net/uid-20766194-id-1850375.html)
    - find + grep + awk
    - 脚本批量 mv
    - rename

* [netstat 命令](http://www.cnblogs.com/ggjucheng/archive/2012/01/08/2316661.html)
    Netstat 命令用于显示各种网络相关信息，如网络连接，路由表，接口状态 (Interface Statistics)，masquerade 连接，多播成员 (Multicast Memberships) 等等

* 应用程序错误报告
    有时候, 系统中的某个应用出现了问题, 那么你就会在每次启动的时候, 看到一个提示框, 问你要不要报告错误. 如果去掉这个提示呢? 
    1. 消除这一次的提示
        删除 `/var/crash/*`
    2. 彻底拜托错误弹窗
        编辑`/etc/default/apport` 文件, 并修改enable为0

* 大多数linux 命令行工具, 都会把参数 `-` 当作标准输入流(通常是读取命令行输入).
    - 比如 `cat -`, 会输出命令行输入.

* 查看/切换 shell
    + `echo $SHELL`         查看当前使用的shell程序
    + `chsh -s /bin/zsh`    切换shell为shell, 最后参数为执行文件路径
*  
