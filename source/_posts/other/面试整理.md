
# 白鹭引擎
## 整体架构
display 封装好的显示对象及容器
events  事件分发模块
filters 各种渲染效果
geom 几何对象定义
i18n 国际化
localStorage 本地存储
media 声音

## 加载流程
## 渲染流程
## 事件机制
## 更新机制
1. html 文件有可能被缓存，不应在内部写过多文件
2. 每次请求manifest.json获取代码文件列表，文件列表可更新。
3. 文件根据内容计算MD5, 并用作文件名，每次文件内容修改会生成不一样的文件名，可避免被缓存。
4. 图集文件与对应的png文件使用同名放在同一目录下，并修改sheet加载器，使能正确加载

## 性能优化

### 加载优化
代码压缩
gzip
图片压缩
配置文件打包，加速下载

### 渲染优化
纹理集
图集纹理连续使用
文字渲染加速
少用 alpha 混合
少用 描边
少用 mask
少用 filter
使用 cacheAsBitmap 减少重绘次数

### 内存管理
对象池
无用的内容，及时指向空，让它能被自动回收
资源自动释放
显存优化： 安全内存大概150M左右，2048*2048的图片占用16M内存
纹理等比压缩

### CPU运算优化
及时删除事件侦听
显式禁用触摸交互
合理使用DispatchEvents
Tween 动画
统一的计时器
使用 ejs 的ui模式
分帧计算
处理网络协议的时候，当处理一条协议之后达到帧间隔上限，则留下一帧再处理，可减少卡顿感
分帧加载
不可见的节点及时从舞台移除或者设置visible= false

### 感受优化
预加载
原生html首屏loading
地图分步加载

### 防作弊优化
HTTPS
二进制流传输
协议文件加密
内存数据加密
防控制台输入

## debug
1. 使用 chrome://inspect
2. Fildder
3. Weinre
4. 修改Host
5. 修改WiFi设置，代理设为电脑
6. console.log
7. adb
8. Chrome Dev Tools: profile, timeline, performance
9. window.onerror 收集错误日志
10. 观察FPS面板的各项指标


## 为什么选择egret
工具流完善
性能满足需求
文档比较全
论坛活跃

## webGL 与 Canvas
1. 性能，webGL 超过Canvas 数倍。
2. webGL 理论可支持2D 和 3D， 但Canvas 只支持2D
3. 普及率，Canvas100%支持， webGL支持率也很高

# Cocos
## 引擎架构
## 渲染流程
## 内存管理
## 事件机制
## 更新机制
## 定制修改
修改FileUtils.getPathForFilename 接口，处理资源路径混淆
修改FileUtils.getData 接口， 对资源做解密处理
新增保底纹理，以防资源丢失导致的闪退
## 性能优化
## 

# 框架
## 框架的作用是什么？
## 框架包含哪些部分？
UI

# 图形渲染
## shaders

# 性能
## 游戏内存占用有多少？
## 游戏资源大小有多少？
## 主城地图最多能多少人同屏？

# 数据结构
## 数组
连续的存储结构，数据密度高， 随机访问， 快速遍历， 增删消耗较大
## 链表
通过next指针来连接， 增删容易，无法随机访问
## hash 表
内部数据结构是数组。
根据键值计算索引存储数据， 需要考虑冲突的处理情况。
O(1)的查找效率，空间消耗比较大
## 堆栈
先进后出
## 队列
先进先出
## 二叉堆
分为大根堆，小根堆， 能快速找到一组数据中的最大/小值。
## 二叉找树
用于维护易查找的数据
每个结点最多只有两个子节点
如果有左子树，则左子树的所有结点值均小于根结点的值
如果有右子树，则右子树的所有结点值均大于根结点的值
没有键值相等的值
[参考](http://www.cnblogs.com/skywang12345/p/3576328.html)

## 二叉平衡树（AVL）
相对于二叉查找树，限制了同一结点的两颗子树高度差最大为1，使得查找效率相对稳定
插入或删除可导致树不平衡，共有四种不同的失衡情况，可以通过左旋右旋子树来重新保持平衡。
[参考](http://www.cnblogs.com/skywang12345/p/3576969.html)

# 算法
## 帧同步
统一随机种子，或者使用固定的随机池；
1. 服务器端向各客户端同步随机种子
2. 服务器端以每秒固定帧率向前端发送帧步进消息。
3. 客户端操作的时候，随时将操作同步到服务器端，服务器端收集操作，并在帧消息中同步转发操作。
4. 客户端收到帧消息，按照消息中的操作，计算逻辑。
5. 客户端渲染帧根据逻辑帧的计算结果，做插值移动。
6. 如果客户端迟迟没有收到帧消息， 则逻辑帧不运算， 渲染帧继续播动画，不走路。

## A*寻路
启发式寻路算法
从起点开始，遍历周边可达点，然后计算每个格子的分值（消耗 + 预期离终点距离），
从所有候选点中，取出分值最低的， 然后重复上述循环， 直到到达终点.
缺点： 起终点不可达的时候， 可能需要遍历整个地图也找不到。
方法： 可以考虑从起终点同时开始往对方查找，可以及时种植。
    记录失败情况，尽快返回。
## CRC 与 Md5

# 网络模块
## tcp
三次握手
## socket
## websocket

# 其他
# 对公司有什么要求
# 对团队有什么样的要求


