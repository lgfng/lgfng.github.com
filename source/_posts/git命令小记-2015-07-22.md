title: git命令小记
date: 2015-07-22 14:42:09
tags: git
---
作为一个程序猿，不会用git是不是显得有点low？答案是肯定的。
为了不那么low，我决定开始学习git，在这里做笔记
## git初始化的几个命令
<!--more-->

```bash
    cd repo
    #进入要操作的文件夹
    git init
    #初始化GIT环境
    git add .
    #添加当前目录的文件到git
    git commit -m "message"
    #提交文件
    git remote add origin git@github.com:user/repo.git
    #关联远程仓库
    git push origin master
    #将本地代码推送到远程仓库
```

[廖雪峰的git教程](http://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000)
[七个你无法忽视的Git使用技巧](http://www.oschina.net/news/68437/seven-git-hacks-you-just-cannot-ignore)


## 如何创建一个新的空的分支
### [方法1](http://www.ooso.net/archives/636)

* 1.首先，从仓库中clone一份代码出来

```bash
    git clone git@git.com:user/repo.git
    cd repo
```

* 2.创建一个新的分支并切换过去

```bash
    --orphan 标识这个分支是一个独立分支，不包含任何提交记录
    git checkout --orphan newBranch
```

* 3.删除原有数据

```bash
    git rm -rf .
    rm .gitignore
```

* 4.提交新的分支

```bash
    echo "this is a new branch" >> README
    git add README
    #没有文件不能提交
    git commit -a -m "newbranch first commit"
    git push origin newbranch
```

* 5.一个全新的 没有任何东西的分支，到这里就算完工了。

### [方法2](http://gitbook.liuhui998.com/5_1.html)

```bash
    git symbolic-ref HEAD refs/heads/newbranch
    rm .git/index
    git clean -fdx
    <do work>
    git add your files
    git commit -m 'Initial commit'
    git push origin newbranch
```

## git删除远程分支

* 1.查看所有远程分支
    
    git branch -a

* 2.删除
    
    git branch -r -d origin/branch_name_todel
    git push origin :branch_name_todel


## git从远程分支还原

* 1.查看提交日志

```bash
    git log
```

* 2.还原到指定版本

```bash
    ##还原有五种选项 --mixed | --soft | --hard | --merge | --keep 
    ##可通过以下命令查看
    git reset -hard

    ##重置 HEAD、索引和工作区
    git reset --hard [ver-hash]

    ##将远程仓库中的版本，也回退到这次提交
    git push -f
```

## git remote 远程仓库
[详情请戳](http://blog.csdn.net/wangjia55/article/details/8802490)
```bash
    ## 查看当前的远程库
    git remote

    ##查看远程库的URL
    git remote -v | --verbose

    ##添加（关联）远程仓库
    git remote add [name] [url]
```

## git branch
[git branch用法总结](http://blog.csdn.net/xiruanliuwei/article/details/6919319)

## github fork
[官方文档](https://help.github.com/articles/fork-a-repo/)
github 的fork按钮，用于拷贝一份代码到自己的仓库中
使用`git clone git@github.com:lgfng/my-fork.git` 将代码拷贝到本地之后，我们会有一个默认的远程仓库 origin。
```bash
    #新增一个remote 来跟踪原始库。
    git remote add upstream https://github.com/origin_owner/origin_remote.git
    #拉取原始代码的更新
    git fetch upstream
    git merge upstream/master
```

如果希望将自己的代码贡献到原始库中， 可以参考[pull_request](http://help.github.com/send-pull-requests/ )

## github 仓库重命名
在github/要重命名的项目主页中,找到setting, 然后点进去,可以修改名称,然后点rename重命名.

## git 恢复本地被修改的文件
+ 恢复到最后一次提交的改动
`git checkout [filename]`
+ 如果已经add到暂存队列中， 则以上命令不生效，需要先让这个文件取消暂存
`git reset HEAD [filename]` 
然后在执行第一条名

## git 命令别名
设置一个别名，用于取消文件暂存状态
`git config --global alias.unstage 'reset HEAD --'` 
使用方法：
`git unstage [filename]`

## git commit
## clone github仓库的某个子目录
    [GitHub克隆源码仓库中的单个子目录](https://blog.kuoruan.com/64.html)
    github支持svn checkout, 所以可以使用 `svn co` 来获取某个子目录， 而不用拉取整个仓库。
    ``` 
        #获取master分支代码
        svn co https://github.com/[user]/[respo]/trunk/[***]
        #获取branch分支代码
        svn co https://github.com/[user]/[respo]/branches/[branch_name]/[***]
    ```
+ -v 

## git submodule
[参考链接](https://segmentfault.com/a/1190000003076028)
```
    # 添加
    git submodule add [repos path] [rela path]
    # 删除
    删除 .gitmodules中对应配置, 
    然后 `git rm -cached` 删除文件.
    # 初始化
    git clone git@github.com:jjz/pod-project.git --recursive
    git submodule update --init --recursive
    # 更新
    git submodule foreach git pull
```
